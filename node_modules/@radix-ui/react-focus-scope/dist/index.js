var e,t,n,o=require("@radix-ui/react-use-callback-ref").useCallbackRef,u=require("@radix-ui/react-primitive").Primitive,r=require("@radix-ui/react-compose-refs").useComposedRefs,c=(e={},t=require("react"),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e),s=(n=require("@babel/runtime/helpers/extends"))&&n.__esModule?n.default:n;const i={bubbles:!1,cancelable:!0},a=/*#__PURE__*/c.forwardRef(((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:v,...E}=e,[b,F]=c.useState(null),y=o(l),S=o(v),T=c.useRef(null),h=r(t,(e=>F(e))),L=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect((()=>{if(a){function e(e){if(L.paused||!b)return;const t=e.target;b.contains(t)?T.current=t:m(T.current,{select:!0})}function t(e){!L.paused&&b&&(b.contains(e.relatedTarget)||m(T.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[a,b,L.paused]),c.useEffect((()=>{if(b){p.add(L);const t=document.activeElement;if(!b.contains(t)){const n=new Event("focusScope.autoFocusOnMount",i);b.addEventListener("focusScope.autoFocusOnMount",y),b.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(m(o,{select:t}),document.activeElement!==n)return}((e=d(b),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&m(b))}return()=>{b.removeEventListener("focusScope.autoFocusOnMount",y),setTimeout((()=>{const e=new Event("focusScope.autoFocusOnUnmount",i);b.addEventListener("focusScope.autoFocusOnUnmount",S),b.dispatchEvent(e),e.defaultPrevented||m(null!=t?t:document.body,{select:!0}),b.removeEventListener("focusScope.autoFocusOnUnmount",S),p.remove(L)}),0)}}var e}),[b,y,S,L]);const N=c.useCallback((e=>{if(!n&&!a)return;if(L.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,o=document.activeElement;if(t&&o){const t=e.currentTarget,[u,r]=function(e){const t=d(e),n=f(t,e),o=f(t.reverse(),e);return[n,o]}(t);u&&r?e.shiftKey||o!==r?e.shiftKey&&o===u&&(e.preventDefault(),n&&m(r,{select:!0})):(e.preventDefault(),n&&m(u,{select:!0})):o===t&&e.preventDefault()}}),[n,a,L.paused]);/*#__PURE__*/return c.createElement(u.div,s({tabIndex:-1},E,{ref:h,onKeyDown:N}))}));function d(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function f(e,t){for(const n of e)if(!l(n,{upTo:t}))return n}function l(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function m(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}exports.FocusScope=a;const p=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=v(e,t),e.unshift(t)},remove(t){var n;e=v(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function v(e,t){const n=[...e],o=n.indexOf(t);return-1!==o&&n.splice(o,1),n}const E=a;exports.Root=E;
//# sourceMappingURL=index.js.map
