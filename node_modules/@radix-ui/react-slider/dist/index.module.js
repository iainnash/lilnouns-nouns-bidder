import{createCollection as e}from"@radix-ui/react-collection";import{Primitive as t}from"@radix-ui/react-primitive";import{useSize as n}from"@radix-ui/react-use-size";import{usePrevious as r}from"@radix-ui/react-use-previous";import{useDirection as o}from"@radix-ui/react-use-direction";import{useControllableState as i}from"@radix-ui/react-use-controllable-state";import{createContextScope as a}from"@radix-ui/react-context";import{useComposedRefs as l}from"@radix-ui/react-compose-refs";import{composeEventHandlers as d}from"@radix-ui/primitive";import{clamp as s}from"@radix-ui/number";import*as u from"react";import c from"@babel/runtime/helpers/esm/extends";const m=["PageUp","PageDown"],f=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],p={ltr:["ArrowDown","Home","ArrowLeft","PageDown"],rtl:["ArrowDown","Home","ArrowRight","PageDown"]},[S,h,v]=e("Slider"),[w,g]=a("Slider",[v]);export{g as createSliderScope};const[x,b]=w("Slider");export const Slider=/*#__PURE__*/u.forwardRef(((e,t)=>{const{name:n,min:r=0,max:o=100,step:a=1,orientation:d="horizontal",disabled:p=!1,minStepsBetweenThumbs:h=0,defaultValue:v=[r],value:w,onValueChange:g=(()=>{}),...b}=e,[E,y]=u.useState(null),_=l(t,(e=>y(e))),M=u.useRef(new Set),K=u.useRef(0),T="horizontal"===d,k=!E||Boolean(E.closest("form")),C=T?R:D,[I=[],z]=i({prop:w,defaultProp:v,onChange:e=>{var t;null===(t=[...M.current][K.current])||void 0===t||t.focus(),g(e)}});function A(e,t){const n=function(e){return(String(e).split(".")[1]||"").length}(a),i=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/a)*a+r,n),l=s(i,[r,o]);z(((e=[])=>{const n=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort(((e,t)=>e-t))}(e,l,t);return function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map(((t,n)=>e[n+1]-t))}(e);return Math.min(...n)>=t}return!0}(n,h*a)?(K.current=n.indexOf(l),String(n)===String(e)?e:n):e}))}/*#__PURE__*/return u.createElement(x,{scope:e.__scopeSlider,disabled:p,min:r,max:o,valueIndexToChangeRef:K,thumbs:M.current,values:I,orientation:d},/*#__PURE__*/u.createElement(S.Provider,{scope:e.__scopeSlider},/*#__PURE__*/u.createElement(S.Slot,{scope:e.__scopeSlider},/*#__PURE__*/u.createElement(C,c({"aria-disabled":p,"data-disabled":p?"":void 0},b,{ref:_,min:r,max:o,onSlideStart:p?void 0:function(e){A(e,function(e,t){if(1===e.length)return 0;const n=e.map((e=>Math.abs(e-t))),r=Math.min(...n);return n.indexOf(r)}(I,e))},onSlideMove:p?void 0:function(e){A(e,K.current)},onHomeKeyDown:()=>!p&&A(r,0),onEndKeyDown:()=>!p&&A(o,I.length-1),onStepKeyDown:({event:e,direction:t})=>{if(!p){const n=m.includes(e.key)||e.shiftKey&&f.includes(e.key)?10:1,r=K.current;A(I[r]+a*n*t,r)}}})))),k&&I.map(((e,t)=>/*#__PURE__*/u.createElement(P,{key:t,name:n?n+(I.length>1?"[]":""):void 0,value:e}))))}));/*#__PURE__*/const[E,y]=w("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),R=/*#__PURE__*/u.forwardRef(((e,t)=>{const{min:n,max:r,dir:i,onSlideStart:a,onSlideMove:d,onStepKeyDown:s,...m}=e,[f,S]=u.useState(null),h=l(t,(e=>S(e))),v=u.useRef(),w=o(f,i),g="ltr"===w;function x(e){const t=v.current||f.getBoundingClientRect(),o=T([0,t.width],g?[n,r]:[r,n]);return v.current=t,o(e-t.left)}/*#__PURE__*/return u.createElement(E,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width"},/*#__PURE__*/u.createElement(_,c({"data-orientation":"horizontal"},m,{ref:h,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=x(e.clientX);null==a||a(t)},onSlideMove:e=>{const t=x(e.clientX);null==d||d(t)},onSlideEnd:()=>v.current=void 0,onStepKeyDown:e=>{const t=p[w].includes(e.key);null==s||s({event:e,direction:t?-1:1})}})))})),D=/*#__PURE__*/u.forwardRef(((e,t)=>{const{min:n,max:r,onSlideStart:o,onSlideMove:i,onStepKeyDown:a,...d}=e,s=u.useRef(null),m=l(t,s),f=u.useRef();function S(e){const t=f.current||s.current.getBoundingClientRect(),o=T([0,t.height],[r,n]);return f.current=t,o(e-t.top)}/*#__PURE__*/return u.createElement(E,{scope:e.__scopeSlider,startEdge:"bottom",endEdge:"top",size:"height",direction:1},/*#__PURE__*/u.createElement(_,c({"data-orientation":"vertical"},d,{ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=S(e.clientY);null==o||o(t)},onSlideMove:e=>{const t=S(e.clientY);null==i||i(t)},onSlideEnd:()=>f.current=void 0,onStepKeyDown:e=>{const t=p.ltr.includes(e.key);null==a||a({event:e,direction:t?-1:1})}})))})),_=/*#__PURE__*/u.forwardRef(((e,n)=>{const{__scopeSlider:r,onSlideStart:o,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:s,onStepKeyDown:p,...S}=e,h=b("Slider",r);/*#__PURE__*/return u.createElement(t.span,c({},S,{ref:n,onKeyDown:d(e.onKeyDown,(e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):m.concat(f).includes(e.key)&&(p(e),e.preventDefault())})),onPointerDown:d(e.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():o(e)})),onPointerMove:d(e.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)})),onPointerUp:d(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))}))}))}));export const SliderTrack=/*#__PURE__*/u.forwardRef(((e,n)=>{const{__scopeSlider:r,...o}=e,i=b("SliderTrack",r);/*#__PURE__*/return u.createElement(t.span,c({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},o,{ref:n}))}));/*#__PURE__*/export const SliderRange=/*#__PURE__*/u.forwardRef(((e,n)=>{const{__scopeSlider:r,...o}=e,i=b("SliderRange",r),a=y("SliderRange",r),d=u.useRef(null),s=l(n,d),m=i.values.length,f=i.values.map((e=>K(e,i.min,i.max))),p=m>1?Math.min(...f):0,S=100-Math.max(...f);/*#__PURE__*/return u.createElement(t.span,c({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},o,{ref:s,style:{...e.style,[a.startEdge]:p+"%",[a.endEdge]:S+"%"}}))}));/*#__PURE__*/export const SliderThumb=/*#__PURE__*/u.forwardRef(((e,t)=>{const n=h(e.__scopeSlider),[r,o]=u.useState(null),i=l(t,(e=>o(e))),a=u.useMemo((()=>r?n().findIndex((e=>e.ref.current===r)):-1),[n,r]);/*#__PURE__*/return u.createElement(M,c({},e,{ref:i,index:a}))}));const M=/*#__PURE__*/u.forwardRef(((e,r)=>{const{__scopeSlider:o,index:i,...a}=e,s=b("SliderThumb",o),m=y("SliderThumb",o),[f,p]=u.useState(null),h=l(r,(e=>p(e))),v=n(f),w=s.values[i],g=void 0===w?0:K(w,s.min,s.max),x=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(i,s.values.length),E=null==v?void 0:v[m.size],R=E?function(e,t,n){const r=e/2,o=T([0,50],[0,r]);return(r-o(t)*n)*n}(E,g,m.direction):0;return u.useEffect((()=>{if(f)return s.thumbs.add(f),()=>{s.thumbs.delete(f)}}),[f,s.thumbs]),/*#__PURE__*/u.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${g}% + ${R}px)`}},/*#__PURE__*/u.createElement(S.ItemSlot,{scope:e.__scopeSlider},/*#__PURE__*/u.createElement(t.span,c({role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":s.min,"aria-valuenow":w,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},a,{ref:h,style:void 0===w?{display:"none"}:e.style,onFocus:d(e.onFocus,(()=>{s.valueIndexToChangeRef.current=i}))}))))})),P=e=>{const{value:t,...n}=e,o=u.useRef(null),i=r(t);return u.useEffect((()=>{const e=o.current,n=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&r){const n=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}}),[i,t]),/*#__PURE__*/u.createElement("input",c({style:{display:"none"}},n,{ref:o,defaultValue:t}))};/*#__PURE__*/function K(e,t,n){return 100/(n-t)*(e-t)}function T(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}export const Root=Slider;export const Track=SliderTrack;export const Range=SliderRange;export const Thumb=SliderThumb;
//# sourceMappingURL=index.module.js.map
