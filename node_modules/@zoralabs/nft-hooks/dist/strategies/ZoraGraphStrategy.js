"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ZoraGraphStrategy = void 0;
const backends_1 = require("../backends");
const NFTStrategy_1 = require("./NFTStrategy");
class ZoraGraphStrategy extends NFTStrategy_1.NFTStrategy {
    constructor(networkId, timeout, mediaContractAddress) {
        super(networkId);
        this.fetchNFT = async (contract, id) => {
            const response = await this.graphDataSource.loadNFT({ contract, id });
            if (response instanceof Error) {
                throw response;
            }
            return this.graphDataSource.transformNFT(response);
        };
        this.queryNFTs = async (query) => {
            return await this.graphDataSource.queryNFTs(query);
        };
        this.graphDataSource = new backends_1.ZoraGraphDataSource(networkId, timeout, mediaContractAddress);
    }
}
exports.ZoraGraphStrategy = ZoraGraphStrategy;
