"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ZoraV2IndexerStrategy = void 0;
const backends_1 = require("../backends");
const NFTStrategy_1 = require("./NFTStrategy");
class ZoraV2IndexerStrategy extends NFTStrategy_1.NFTStrategy {
    constructor(networkId, timeout, mediaContractAddress) {
        super(networkId);
        this.fetchNFT = async (contract, id) => {
            const response = await this.zoraIndexerDataSource.loadNFT({ contract, id });
            if (response instanceof Error) {
                throw response;
            }
            return this.zoraIndexerDataSource.transformNFT(response);
        };
        this.queryNFTs = async (query) => {
            return await this.zoraIndexerDataSource.queryNFTs(query);
        };
        this.zoraIndexerDataSource = new backends_1.ZoraIndexerV1DataSource(networkId, timeout, mediaContractAddress);
    }
}
exports.ZoraV2IndexerStrategy = ZoraV2IndexerStrategy;
